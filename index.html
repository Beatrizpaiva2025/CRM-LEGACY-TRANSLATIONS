<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRM - Tradu√ß√£o Juramentada EUA</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a365d 0%, #2d3748 50%, #1a202c 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(26, 54, 93, 0.15);
            text-align: center;
            border: 1px solid rgba(26, 54, 93, 0.1);
        }

        .header h1 {
            font-size: 2.5em;
            color: #1a365d;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(26, 54, 93, 0.1);
        }

        .header p {
            font-size: 1.2em;
            color: #4a5568;
            max-width: 600px;
            margin: 0 auto;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(26, 54, 93, 0.15);
            transition: transform 0.3s ease;
            border: 1px solid rgba(26, 54, 93, 0.1);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(26, 54, 93, 0.2);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #1a365d;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #4a5568;
            font-size: 0.9em;
        }

        .controls {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(26, 54, 93, 0.15);
            border: 1px solid rgba(26, 54, 93, 0.1);
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            align-items: end;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #1a365d;
        }

        .form-group input, .form-group select {
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #1a365d;
            box-shadow: 0 0 0 3px rgba(26, 54, 93, 0.1);
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #1a365d, #2d3748);
            color: white;
            border: 1px solid #1a365d;
        }

        .btn-success {
            background: linear-gradient(135deg, #38a169, #2f855a);
            color: white;
            border: 1px solid #38a169;
        }

        .btn-warning {
            background: linear-gradient(135deg, #d69e2e, #b7791f);
            color: white;
            border: 1px solid #d69e2e;
        }

        .btn-danger {
            background: linear-gradient(135deg, #e53e3e, #c53030);
            color: white;
            border: 1px solid #e53e3e;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .table-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .table-header h2 {
            color: #2c3e50;
            font-size: 1.8em;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95em;
        }

        th, td {
            padding: 15px 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        th {
            background: linear-gradient(135deg, #1a365d, #2d3748);
            color: white;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        tr:hover {
            background-color: rgba(26, 54, 93, 0.05);
        }

        .status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            text-align: center;
        }

        .status-prospecto {
            background-color: #fef5e7;
            color: #975a16;
            border: 1px solid #f6e05e;
        }

        .status-contato {
            background-color: #e6fffa;
            color: #234e52;
            border: 1px solid #4fd1c7;
        }

        .status-negociacao {
            background-color: #f0fff4;
            color: #22543d;
            border: 1px solid #68d391;
        }

        .status-cliente {
            background-color: #e6fffa;
            color: #1a202c;
            border: 1px solid #38b2ac;
        }

        .status-perdido {
            background-color: #fed7d7;
            color: #742a2a;
            border: 1px solid #fc8181;
        }

        .priority {
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
        }

        .priority-alta {
            background-color: #fed7d7;
            color: #742a2a;
        }

        .priority-media {
            background-color: #fef5e7;
            color: #975a16;
        }

        .priority-baixa {
            background-color: #f0fff4;
            color: #22543d;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e1e8ed;
        }

        .close {
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }

        .close:hover {
            color: #333;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .notes-section {
            margin-top: 20px;
        }

        .notes-section textarea {
            width: 100%;
            min-height: 100px;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-family: inherit;
            resize: vertical;
        }

        .notes-section textarea:focus {
            outline: none;
            border-color: #1a365d;
            box-shadow: 0 0 0 3px rgba(26, 54, 93, 0.1);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .controls-grid {
                grid-template-columns: 1fr;
            }
            
            table {
                font-size: 0.85em;
            }
            
            th, td {
                padding: 10px 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèõÔ∏è CRM - Tradu√ß√£o Juramentada EUA</h1>
            <p>Sistema de gerenciamento de relacionamento com empresas que necessitam de servi√ßos de tradu√ß√£o juramentada nos Estados Unidos</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="totalEmpresas">45</div>
                <div class="stat-label">Total de Empresas</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="clientesAtivos">12</div>
                <div class="stat-label">Clientes Ativos</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="emNegociacao">8</div>
                <div class="stat-label">Em Negocia√ß√£o</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="novosMes">15</div>
                <div class="stat-label">Novos Este M√™s</div>
            </div>
        </div>

        <div class="controls">
            <div class="controls-grid">
                <div class="form-group">
                    <label for="searchInput">Buscar por nome ou email:</label>
                    <input type="text" id="searchInput" placeholder="Digite para buscar...">
                </div>
                <div class="form-group">
                    <label for="statusFilter">Filtrar por Status:</label>
                    <select id="statusFilter">
                        <option value="">Todos os Status</option>
                        <option value="Prospecto">Prospecto</option>
                        <option value="Primeiro Contato">Primeiro Contato</option>
                        <option value="Em Negocia√ß√£o">Em Negocia√ß√£o</option>
                        <option value="Cliente Ativo">Cliente Ativo</option>
                        <option value="Perdido">Perdido</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="tipoFilter">Filtrar por Tipo:</label>
                    <select id="tipoFilter">
                        <option value="">Todos os Tipos</option>
                        <option value="Escrit√≥rio de Advocacia">Escrit√≥rio de Advocacia</option>
                        <option value="Universidade">Universidade</option>
                        <option value="Empresa Multinacional">Empresa Multinacional</option>
                        <option value="Ag√™ncia Governamental">Ag√™ncia Governamental</option>
                        <option value="Consultor de Imigra√ß√£o">Consultor de Imigra√ß√£o</option>
                    </select>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-primary" onclick="adicionarEmpresa()">‚ûï Nova Empresa</button>
                    <button class="btn btn-success" onclick="exportarDados()">üìä Exportar</button>
                </div>
            </div>
        </div>

        <div class="table-container">
            <div class="table-header">
                <h2>üìã Lista de Empresas</h2>
                <button class="btn btn-warning" onclick="atualizarDados()">üîÑ Atualizar</button>
            </div>
            
            <div style="overflow-x: auto;">
                <table id="empresasTable">
                    <thead>
                        <tr>
                            <th>Empresa</th>
                            <th>Tipo</th>
                            <th>Contato</th>
                            <th>Email</th>
                            <th>Telefone</th>
                            <th>Estado</th>
                            <th>Status</th>
                            <th>Prioridade</th>
                            <th>√öltimo Contato</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="empresasTableBody">
                        <!-- Dados ser√£o inseridos aqui pelo JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Modal para adicionar/editar empresa -->
    <div id="empresaModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Adicionar Nova Empresa</h2>
                <span class="close" onclick="fecharModal()">&times;</span>
            </div>
            <form id="empresaForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="nomeEmpresa">Nome da Empresa*:</label>
                        <input type="text" id="nomeEmpresa" required>
                    </div>
                    <div class="form-group">
                        <label for="tipoEmpresa">Tipo de Empresa*:</label>
                        <select id="tipoEmpresa" required>
                            <option value="">Selecione...</option>
                            <option value="Escrit√≥rio de Advocacia">Escrit√≥rio de Advocacia</option>
                            <option value="Universidade">Universidade</option>
                            <option value="Empresa Multinacional">Empresa Multinacional</option>
                            <option value="Ag√™ncia Governamental">Ag√™ncia Governamental</option>
                            <option value="Consultor de Imigra√ß√£o">Consultor de Imigra√ß√£o</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="nomeContato">Nome do Contato*:</label>
                        <input type="text" id="nomeContato" required>
                    </div>
                    <div class="form-group">
                        <label for="emailContato">Email*:</label>
                        <input type="email" id="emailContato" required>
                    </div>
                    <div class="form-group">
                        <label for="telefoneContato">Telefone:</label>
                        <input type="tel" id="telefoneContato">
                    </div>
                    <div class="form-group">
                        <label for="estadoEmpresa">Estado:</label>
                        <select id="estadoEmpresa">
                            <option value="">Selecione...</option>
                            <option value="CA">California</option>
                            <option value="NY">New York</option>
                            <option value="TX">Texas</option>
                            <option value="FL">Florida</option>
                            <option value="IL">Illinois</option>
                            <option value="PA">Pennsylvania</option>
                            <option value="OH">Ohio</option>
                            <option value="GA">Georgia</option>
                            <option value="NC">North Carolina</option>
                            <option value="MI">Michigan</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="statusEmpresa">Status*:</label>
                        <select id="statusEmpresa" required>
                            <option value="Prospecto">Prospecto</option>
                            <option value="Primeiro Contato">Primeiro Contato</option>
                            <option value="Em Negocia√ß√£o">Em Negocia√ß√£o</option>
                            <option value="Cliente Ativo">Cliente Ativo</option>
                            <option value="Perdido">Perdido</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="prioridadeEmpresa">Prioridade:</label>
                        <select id="prioridadeEmpresa">
                            <option value="Baixa">Baixa</option>
                            <option value="M√©dia">M√©dia</option>
                            <option value="Alta">Alta</option>
                        </select>
                    </div>
                </div>
                <div class="notes-section">
                    <div class="form-group">
                        <label for="observacoes">Observa√ß√µes:</label>
                        <textarea id="observacoes" placeholder="Adicione observa√ß√µes sobre a empresa ou contato..."></textarea>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 25px;">
                    <button type="submit" class="btn btn-success">üíæ Salvar</button>
                    <button type="button" class="btn btn-danger" onclick="fecharModal()">‚ùå Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Dados de exemplo baseados na pesquisa de mercado
        let empresas = [
            {
                id: 1,
                nome: "Immigration Law Partners",
                tipo: "Escrit√≥rio de Advocacia",
                contato: "Sarah Johnson",
                email: "sarah@immigrationlp.com",
                telefone: "(212) 555-0123",
                estado: "NY",
                status: "Cliente Ativo",
                prioridade: "Alta",
                ultimoContato: "2025-07-20",
                observacoes: "Escrit√≥rio especializado em imigra√ß√£o empresarial. Volume alto de documentos mensais."
            },
            {
                id: 2,
                nome: "Columbia University",
                tipo: "Universidade",
                contato: "Dr. Michael Chen",
                email: "mchen@columbia.edu",
                telefone: "(212) 555-0234",
                estado: "NY",
                status: "Em Negocia√ß√£o",
                prioridade: "Alta",
                ultimoContato: "2025-07-18",
                observacoes: "Departamento de admiss√µes internacionais. Necessitam tradu√ß√£o de diplomas e hist√≥ricos."
            },
            {
                id: 3,
                nome: "Global Tech Solutions",
                tipo: "Empresa Multinacional",
                contato: "Amanda Rodriguez",
                email: "amanda.r@globaltech.com",
                telefone: "(408) 555-0345",
                estado: "CA",
                status: "Prospecto",
                prioridade: "M√©dia",
                ultimoContato: "2025-07-15",
                observacoes: "Empresa de tecnologia com sede no Vale do Sil√≠cio. Processam muitos vistos H1B."
            },
            {
                id: 4,
                nome: "Miller & Associates Law Firm",
                tipo: "Escrit√≥rio de Advocacia",
                contato: "Robert Miller",
                email: "rmiller@millerlaw.com",
                telefone: "(305) 555-0456",
                estado: "FL",
                status: "Cliente Ativo",
                prioridade: "Alta",
                ultimoContato: "2025-07-22",
                observacoes: "Especialistas em direito de imigra√ß√£o familiar. Cliente desde 2023."
            },
            {
                id: 5,
                nome: "Harvard Business School",
                tipo: "Universidade",
                contato: "Prof. Lisa Thompson",
                email: "lthompson@hbs.edu",
                telefone: "(617) 555-0567",
                estado: "MA",
                status: "Primeiro Contato",
                prioridade: "Alta",
                ultimoContato: "2025-07-10",
                observacoes: "Programa MBA internacional. Alto volume de aplica√ß√µes estrangeiras."
            },
            {
                id: 6,
                nome: "Texas Immigration Solutions",
                tipo: "Consultor de Imigra√ß√£o",
                contato: "Carlos Mendoza",
                email: "carlos@texasimmigration.com",
                telefone: "(713) 555-0678",
                estado: "TX",
                status: "Em Negocia√ß√£o",
                prioridade: "M√©dia",
                ultimoContato: "2025-07-19",
                observacoes: "Consultoria especializada em casos complexos de imigra√ß√£o."
            },
            {
                id: 7,
                nome: "USCIS Regional Office",
                tipo: "Ag√™ncia Governamental",
                contato: "Director Jane Smith",
                email: "jane.smith@uscis.dhs.gov",
                telefone: "(202) 555-0789",
                estado: "DC",
                status: "Prospecto",
                prioridade: "Alta",
                ultimoContato: "2025-07-12",
                observacoes: "Escrit√≥rio regional que processa aplica√ß√µes de imigra√ß√£o."
            },
            {
                id: 8,
                nome: "Stanford University",
                tipo: "Universidade",
                contato: "Dr. Kevin Park",
                email: "kpark@stanford.edu",
                telefone: "(650) 555-0890",
                estado: "CA",
                status: "Cliente Ativo",
                prioridade: "Alta",
                ultimoContato: "2025-07-23",
                observacoes: "Escrit√≥rio de estudantes internacionais. Partnership estabelecida."
            },
            {
                id: 9,
                nome: "International Business Corp",
                tipo: "Empresa Multinacional",
                contato: "Maria Gonzalez",
                email: "mgonzalez@intlbusiness.com",
                telefone: "(312) 555-0901",
                estado: "IL",
                status: "Perdido",
                prioridade: "Baixa",
                ultimoContato: "2025-06-30",
                observacoes: "Optaram por servi√ßo interno de tradu√ß√£o."
            },
            {
                id: 10,
                nome: "Chicago Immigration Law Center",
                tipo: "Escrit√≥rio de Advocacia",
                contato: "David Kim",
                email: "dkim@chicagoimmigration.com",
                telefone: "(312) 555-1012",
                estado: "IL",
                status: "Em Negocia√ß√£o",
                prioridade: "M√©dia",
                ultimoContato: "2025-07-21",
                observacoes: "Centro de advocacia sem fins lucrativos. Negociando pre√ßos especiais."
            }
        ];

        let editandoId = null;

        function renderizarTabela(dados = empresas) {
            const tbody = document.getElementById('empresasTableBody');
            tbody.innerHTML = '';

            dados.forEach(empresa => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${empresa.nome}</strong></td>
                    <td>${empresa.tipo}</td>
                    <td>${empresa.contato}</td>
                    <td><a href="mailto:${empresa.email}">${empresa.email}</a></td>
                    <td>${empresa.telefone}</td>
                    <td>${empresa.estado}</td>
                    <td><span class="status status-${empresa.status.replace(/\s+/g, '').toLowerCase()}">${empresa.status}</span></td>
                    <td><span class="priority priority-${empresa.prioridade.toLowerCase()}">${empresa.prioridade}</span></td>
                    <td>${formatarData(empresa.ultimoContato)}</td>
                    <td>
                        <button class="btn btn-primary" onclick="editarEmpresa(${empresa.id})" style="padding: 5px 10px; font-size: 0.8em; margin: 2px;">‚úèÔ∏è</button>
                        <button class="btn btn-danger" onclick="excluirEmpresa(${empresa.id})" style="padding: 5px 10px; font-size: 0.8em; margin: 2px;">üóëÔ∏è</button>
                    </td>
                `;
                tbody.appendChild(row);
            });

            atualizarEstatisticas();
        }

        function atualizarEstatisticas() {
            document.getElementById('totalEmpresas').textContent = empresas.length;
            document.getElementById('clientesAtivos').textContent = empresas.filter(e => e.status === 'Cliente Ativo').length;
            document.getElementById('emNegociacao').textContent = empresas.filter(e => e.status === 'Em Negocia√ß√£o').length;
            
            const umMesAtras = new Date();
            umMesAtras.setMonth(umMesAtras.getMonth() - 1);
            document.getElementById('novosMes').textContent = empresas.filter(e => new Date(e.ultimoContato) > umMesAtras).length;
        }

        function formatarData(dataString) {
            const data = new Date(dataString);
            return data.toLocaleDateString('pt-BR');
        }

        function adicionarEmpresa() {
            editandoId = null;
            document.getElementById('modalTitle').textContent = 'Adicionar Nova Empresa';
            document.getElementById('empresaForm').reset();
            document.getElementById('empresaModal').style.display = 'block';
        }

        function editarEmpresa(id) {
            const empresa = empresas.find(e => e.id === id);
            if (!empresa) return;

            editandoId = id;
            document.getElementById('modalTitle').textContent = 'Editar Empresa';
            
            // Preencher formul√°rio
            document.getElementById('nomeEmpresa').value = empresa.nome;
            document.getElementById('tipoEmpresa').value = empresa.tipo;
            document.getElementById('nomeContato').value = empresa.contato;
            document.getElementById('emailContato').value = empresa.email;
            document.getElementById('telefoneContato').value = empresa.telefone;
            document.getElementById('estadoEmpresa').value = empresa.estado;
            document.getElementById('statusEmpresa').value = empresa.status;
            document.getElementById('prioridadeEmpresa').value = empresa.prioridade;
            document.getElementById('observacoes').value = empresa.observacoes || '';

            document.getElementById('empresaModal').style.display = 'block';
        }

        function excluirEmpresa(id) {
            if (confirm('Tem certeza que deseja excluir esta empresa?')) {
                empresas = empresas.filter(e => e.id !== id);
                renderizarTabela();
            }
        }

        function fecharModal() {
            document.getElementById('empresaModal').style.display = 'none';
        }

        // Event Listeners
        document.getElementById('empresaForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const dadosEmpresa = {
                nome: document.getElementById('nomeEmpresa').value,
                tipo: document.getElementById('tipoEmpresa').value,
                contato: document.getElementById('nomeContato').value,
                email: document.getElementById('emailContato').value,
                telefone: document.getElementById('telefoneContato').value,
                estado: document.getElementById('estadoEmpresa').value,
                status: document.getElementById('statusEmpresa').value,
                prioridade: document.getElementById('prioridadeEmpresa').value,
                observacoes: document.getElementById('observacoes').value,
                ultimoContato: new Date().toISOString().split('T')[0]
            };

            if (editandoId) {
                // Editar empresa existente
                const index = empresas.findIndex(e => e.id === editandoId);
                empresas[index] = { ...empresas[index], ...dadosEmpresa };
            } else {
                // Adicionar nova empresa
                const novoId = Math.max(...empresas.map(e => e.id)) + 1;
                empresas.push({ id: novoId, ...dadosEmpresa });
            }

            renderizarTabela();
            fecharModal();
        });

        // Filtros e busca
        document.getElementById('searchInput').addEventListener('input', function(e) {
            aplicarFiltros();
        });

        document.getElementById('statusFilter').addEventListener('change', function(e) {
            aplicarFiltros();
        });

        document.getElementById('tipoFilter').addEventListener('change', function(e) {
            aplicarFiltros();
        });

        function aplicarFiltros() {
            const busca = document.getElementById('searchInput').value.toLowerCase();
            const statusFiltro = document.getElementById('statusFilter').value;
            const tipoFiltro = document.getElementById('tipoFilter').value;

            let empresasFiltradas = empresas.filter(empresa => {
                const matchBusca = !busca || 
                    empresa.nome.toLowerCase().includes(busca) ||
                    empresa.contato.toLowerCase().includes(busca) ||
                    empresa.email.toLowerCase().includes(busca);
                
                const matchStatus = !statusFiltro || empresa.status === statusFiltro;
                const matchTipo = !tipoFiltro || empresa.tipo === tipoFiltro;

                return matchBusca && matchStatus && matchTipo;
            });

            renderizarTabela(empresasFiltradas);
        }

        function exportarDados() {
            const dadosCSV = [
                ['Nome da Empresa', 'Tipo', 'Contato', 'Email', 'Telefone', 'Estado', 'Status', 'Prioridade', '√öltimo Contato', 'Observa√ß√µes']
            ];

            empresas.forEach(empresa => {
                dadosCSV.push([
                    empresa.nome,
                    empresa.tipo,
                    empresa.contato,
                    empresa.email,
                    empresa.telefone,
                    empresa.estado,
                    empresa.status,
                    empresa.prioridade,
                    empresa.ultimoContato,
                    empresa.observacoes || ''
                ]);
            });

            const csvContent = dadosCSV.map(row => 
                row.map(field => `"${field}"`).join(',')
            ).join('\n');

            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `empresas_traducao_juramentada_${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function atualizarDados() {
            // Simular atualiza√ß√£o de dados
            const loading = document.createElement('div');
            loading.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(255, 255, 255, 0.95);
                padding: 20px 30px;
                border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                z-index: 2000;
                text-align: center;
                font-size: 1.2em;
                color: #2c3e50;
            `;
            loading.innerHTML = 'üîÑ Atualizando dados...';
            document.body.appendChild(loading);

            setTimeout(() => {
                document.body.removeChild(loading);
                renderizarTabela();
                
                // Mostrar notifica√ß√£o de sucesso
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(135deg, #2ecc71, #27ae60);
                    color: white;
                    padding: 15px 25px;
                    border-radius: 10px;
                    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
                    z-index: 2000;
                    font-weight: 600;
                `;
                notification.innerHTML = '‚úÖ Dados atualizados com sucesso!';
                document.body.appendChild(notification);

                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 3000);
            }, 1500);
        }

        // Adicionar mais empresas de exemplo para demonstrar a funcionalidade completa
        function adicionarEmpresasAmostra() {
            const novasEmpresas = [
                {
                    id: 11,
                    nome: "MIT International Office",
                    tipo: "Universidade",
                    contato: "Dr. Jennifer Wong",
                    email: "jwong@mit.edu",
                    telefone: "(617) 555-1123",
                    estado: "MA",
                    status: "Cliente Ativo",
                    prioridade: "Alta",
                    ultimoContato: "2025-07-24",
                    observacoes: "Instituto de tecnologia com alto volume de estudantes internacionais."
                },
                {
                    id: 12,
                    nome: "Silicon Valley Immigration",
                    tipo: "Escrit√≥rio de Advocacia",
                    contato: "Alexander Petrov",
                    email: "apetrov@svimmigration.com",
                    telefone: "(408) 555-1234",
                    estado: "CA",
                    status: "Em Negocia√ß√£o",
                    prioridade: "Alta",
                    ultimoContato: "2025-07-22",
                    observacoes: "Especialistas em vistos de trabalho para profissionais de tecnologia."
                },
                {
                    id: 13,
                    nome: "Amazon Corporate Immigration",
                    tipo: "Empresa Multinacional",
                    contato: "Rachel Green",
                    email: "rgreen@amazon.com",
                    telefone: "(206) 555-1345",
                    estado: "WA",
                    status: "Prospecto",
                    prioridade: "Alta",
                    ultimoContato: "2025-07-20",
                    observacoes: "Departamento de RH para funcion√°rios internacionais."
                },
                {
                    id: 14,
                    nome: "UCLA Extension International",
                    tipo: "Universidade",
                    contato: "Prof. Maria Santos",
                    email: "msantos@ucla.edu",
                    telefone: "(310) 555-1456",
                    estado: "CA",
                    status: "Primeiro Contato",
                    prioridade: "M√©dia",
                    ultimoContato: "2025-07-18",
                    observacoes: "Programas de extens√£o para estudantes internacionais."
                },
                {
                    id: 15,
                    nome: "Florida Immigration Solutions",
                    tipo: "Consultor de Imigra√ß√£o",
                    contato: "Jose Martinez",
                    email: "jmartinez@flimmigration.com",
                    telefone: "(305) 555-1567",
                    estado: "FL",
                    status: "Em Negocia√ß√£o",
                    prioridade: "M√©dia",
                    ultimoContato: "2025-07-19",
                    observacoes: "Consultoria com foco em comunidade hisp√¢nica."
                }
            ];

            empresas.push(...novasEmpresas);
        }

        // Fun√ß√£o para inicializar dados adicionais
        function inicializarDadosCompletos() {
            adicionarEmpresasAmostra();
            
            // Adicionar mais empresas com base na pesquisa de mercado
            const empresasAdicionais = [
                {
                    id: 16,
                    nome: "Google Immigration Services",
                    tipo: "Empresa Multinacional",
                    contato: "Sarah Kim",
                    email: "skim@google.com",
                    telefone: "(650) 555-1678",
                    estado: "CA",
                    status: "Cliente Ativo",
                    prioridade: "Alta",
                    ultimoContato: "2025-07-25",
                    observacoes: "Departamento especializado em vistos H1B e L1."
                },
                {
                    id: 17,
                    nome: "New York Immigration Court",
                    tipo: "Ag√™ncia Governamental",
                    contato: "Judge Patricia Moore",
                    email: "pmoore@usdoj.gov",
                    telefone: "(212) 555-1789",
                    estado: "NY",
                    status: "Prospecto",
                    prioridade: "Alta",
                    ultimoContato: "2025-07-16",
                    observacoes: "Tribunal de imigra√ß√£o que processa casos complexos."
                },
                {
                    id: 18,
                    nome: "Boston University International",
                    tipo: "Universidade",
                    contato: "Dr. Richard Taylor",
                    email: "rtaylor@bu.edu",
                    telefone: "(617) 555-1890",
                    estado: "MA",
                    status: "Em Negocia√ß√£o",
                    prioridade: "M√©dia",
                    ultimoContato: "2025-07-21",
                    observacoes: "Escrit√≥rio de assuntos internacionais da universidade."
                },
                {
                    id: 19,
                    nome: "Microsoft Immigration Team",
                    tipo: "Empresa Multinacional",
                    contato: "Lisa Chen",
                    email: "lchen@microsoft.com",
                    telefone: "(425) 555-1901",
                    estado: "WA",
                    status: "Cliente Ativo",
                    prioridade: "Alta",
                    ultimoContato: "2025-07-23",
                    observacoes: "Equipe dedicada a processos de imigra√ß√£o corporativa."
                },
                {
                    id: 20,
                    nome: "Immigration Legal Aid Society",
                    tipo: "Escrit√≥rio de Advocacia",
                    contato: "Maria Rodriguez",
                    email: "mrodriguez@legalaidsociety.org",
                    telefone: "(713) 555-2012",
                    estado: "TX",
                    status: "Primeiro Contato",
                    prioridade: "Baixa",
                    ultimoContato: "2025-07-14",
                    observacoes: "Organiza√ß√£o sem fins lucrativos que oferece assist√™ncia legal."
                }
            ];

            empresas.push(...empresasAdicionais);
        }

        // Event listener para fechar modal ao clicar fora dele
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('empresaModal');
            if (event.target === modal) {
                fecharModal();
            }
        });

        // Inicializar aplica√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            inicializarDadosCompletos();
            renderizarTabela();
            
            // Adicionar anima√ß√£o de entrada
            const elements = document.querySelectorAll('.stat-card, .controls, .table-container');
            elements.forEach((element, index) => {
                element.style.opacity = '0';
                element.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    element.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                    element.style.opacity = '1';
                    element.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });

        // Adicionar funcionalidade de busca em tempo real
        let timeoutId;
        document.getElementById('searchInput').addEventListener('input', function() {
            clearTimeout(timeoutId);
            timeoutId = setTimeout(() => {
                aplicarFiltros();
            }, 300);
        });

        // Fun√ß√£o para adicionar empresa via entrada r√°pida
        function adicionarEmpresaRapida() {
            const nome = prompt('Nome da empresa:');
            if (!nome) return;
            
            const email = prompt('Email de contato:');
            if (!email) return;
            
            const novoId = Math.max(...empresas.map(e => e.id)) + 1;
            const novaEmpresa = {
                id: novoId,
                nome: nome,
                tipo: 'Escrit√≥rio de Advocacia',
                contato: 'A definir',
                email: email,
                telefone: '',
                estado: '',
                status: 'Prospecto',
                prioridade: 'M√©dia',
                ultimoContato: new Date().toISOString().split('T')[0],
                observacoes: 'Adicionado via entrada r√°pida'
            };
            
            empresas.push(novaEmpresa);
            renderizarTabela();
            
            // Mostrar notifica√ß√£o
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #3498db, #2980b9);
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
                z-index: 2000;
                font-weight: 600;
            `;
            notification.innerHTML = `‚úÖ ${nome} adicionada com sucesso!`;
            document.body.appendChild(notification);

            setTimeout(() => {
                document.body.removeChild(notification);
            }, 3000);
        }

        // Adicionar atalhos de teclado
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'n') {
                e.preventDefault();
                adicionarEmpresa();
            }
            if (e.ctrlKey && e.key === 'e') {
                e.preventDefault();
                exportarDados();
            }
            if (e.key === 'Escape') {
                fecharModal();
            }
        });
    </script>
</body>
</html>
